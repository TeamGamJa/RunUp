<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="question">
   
   <select id="getQuestionByKeyword" parameterType="String" resultType="Question">
		SELECT * FROM question WHERE questionTitle LIKE CONCAT('%', #{keyword},'%')
   </select>
   
   <insert id="createQuestion" parameterType="Question">
		INSERT INTO question (QuestionNum, QuestionCategoryBig, QuestionCategoryMedium, QuestionChoice, 
		QuestionTitle, QuestionContent, QuestionWriter, UserNum, QuestionDate)
		VALUES (#{questionNum}, #{questionCategoryBig}, #{questionCategoryMedium}, #{questionChoice}, 
			#{questionTitle}, #{questionContent}, #{questionWriter}, #{userNum}, Now())
   </insert>
   
   <select id="openQuestion" parameterType="Integer" resultType="Question">
		SELECT * FROM question WHERE QuestionNum = #{QuestionNum}
   </select>
   
   <update id="updateQuestion" parameterType="Question">
   		UPDATE question SET QuestionCategoryBig = #{questionCategoryBig}, QuestionCategoryMedium = #{questionCategoryMedium},
   		QuestionChoice = #{questionChoice}, QuestionTitle = #{questionTitle}, QuestionContent = #{questionContent}
   		WHERE userNum = #{userNum} and QuestionNum = #{questionNum}
   </update>
   
   <delete id="deleteQuestion" parameterType="Integer">
   		DELETE FROM question
		WHERE QuestionNum = #{questionNum}
   </delete>

</mapper>