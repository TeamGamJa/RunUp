<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="running">
   
   <select id="selectCategoryBigList" resultType="String">
    <![CDATA[
      select distinct categoryBig from category
    ]]>  
   </select>
   
   <select id="selectCategoryMediumList" resultType="String">
    <![CDATA[
      select distinct categoryMedium from category
    ]]>  
   </select>
   
   <select id="selectCategoryMediumListByCategoryBig" resultType="String">
    <![CDATA[
      select distinct categoryMedium from category where categoryBig = #{categoryBig}
    ]]>  
   </select>
   
   <select id="selectRunningList" resultType="Running">
   <![CDATA[
   	  select * 
   	  from running where runningShow = 1
   ]]>
   </select>
   
   <select id="selectRunningBycategorybig" parameterType = "String" resultType="Running">
   <![CDATA[
   	  select * 
   	  from running where runningShow = 1 and runningCategoryBig = #{runningCategoryBig}
   ]]>
   </select>
   
   <select id="selectRunningBycategorymedium" parameterType = "String" resultType="Running">
   <![CDATA[
   	  select * 
   	  from running where runningShow = 1 and runningCategoryMedium = #{runningCategoryMedium}
   ]]>
   </select>
   
   <select id="selectRunningByKeyword" parameterType="String" resultType="Running">
   <![CDATA[
      select *
      from running where runningShow = 1 and runningTitle Like CONCAT('%', #{keyword},'%')
   ]]>
   </select>
   
   <select id="selectRunning" resultType="Running">
   <![CDATA[
   	  select * 
   	  from running where runningNum = #{runningNum}
   ]]>
   </select>
   
   <insert id="createRunning" parameterType="Running">
   <![CDATA[
     insert into running(runningTitle,runningContent,runningCategoryBig,
     runningCategoryMedium, runningStartBig, runningStartSmall, runningEndBig, runningEndSmall,runningKeep,userNum) 
     values (#{runningTitle}, #{runningContent}, #{runningCategoryBig}, #{runningCategoryMedium}, #{runningStartBig}, 
     #{runningStartSmall}, #{runningEndBig}, #{runningEndSmall}, #{runningKeep}, #{userNum})
   ]]>
   </insert>
   
   <delete id="deleteRunning" parameterType="Running">
   <![CDATA[
     delete from running where userNum = #{userNum} and runningNum = #{runningNum}
   ]]>
   </delete>
   
   <update id="updateRunning" parameterType="Running" >
   <![CDATA[
     update running set runningTitle = #{runningTitle}, runningContent = #{runningContent}, 
     runningCategoryBig = #{runningCategoryBig}, runningCategoryMedium = #{runningCategoryMedium},
     runningStartBig = #{runningStartBig}, runningStartSmall = #{runningStartSmall}, 
     runningEndBig = #{runningEndBig}, runningEndSmall = #{runningEndSmall},
     runningKeep = #{runningKeep}
     where userNum = #{userNum} and runningNum = #{runningNum}
   ]]>
   </update>
   
   <update id="updateViewNum" parameterType="Running" >
   <![CDATA[
   	 update running set runningViewNum = runningViewNum + 1 
   	 where runningNum = #{runningNum}
   ]]>
   </update>
   
</mapper>